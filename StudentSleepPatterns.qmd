---
title: "Student Sleep Patterns"
subtitle: "Stat 184 Sec 2"
author: "Anna Kasehagen, Gracy Franco Prasanna, Melissa Kim, Sarah Khan"
date: "Dec. 13, 2024"
date-modified: now
format:
  pdf:
    toc: FALSE
    number-sections: TRUE
    number-depth: 5
    fig-align: center
    cap-location: top
    geometry:
      - top=1in
      - left=1in
      - right=1in
      - bottom=1in
    colorlinks: TRUE
execute:
  echo: FALSE
  warning: FALSE
  cache: TRUE
  message: FALSE
---

# Introduction

This is the citation for the dataset[^1]

[^1]: jamal, A. (2024, October 14). Student sleep patterns. Kaggle. https://www.kaggle.com/datasets/arsalanjamal002/student-sleep-patterns

# FAIR/CARE Principles

Our dataset, titled “Student Sleep Patterns” and created by Arsalan Jamal, meets the FAIR and CARE principles in the following manner:

## FAIR: 

Findability: This dataset is findable through the website Kaggle, which is an online platform that allows users to access datasets that can be used for a variety of data science and machine learning purposes. In addition, the name of this dataset is “student_sleep_patterns.csv”, which succinctly describes the contents of the dataset.

Accessibility: Kaggle is a highly accessible open-source platform, as its interface is user-friendly and its datasets are primarily free. Therefore, it provides a low barrier to entry for those interested in using its datasets. As such, this dataset follows similar standards of accessibility. In our project, the data can be accessed through GitHub, which is also an open source platform, and, seeing as the repository is public, highly accessible.

Interoperability: The data is saved in a .csv format, which is widely-supported. In addition, common units are used, such as decimal points rounded to the tenths places. 

Reusable: As this data is found through an open-source platform, which contains an extensive description of the data as well as the measurements of the data. In our project, we have created a QUARTO file with an introduction describing the data and our intentions with the data, as well as what we analysed. 

## CARE: 

This dataset is synthetic data, and as such, is neither perfectly reflective of student sleep patterns nor a comprehensive analysis of all the factors that contribute to student sleep patterns. This data, therefore, does not reflect the sleep patterns of any racial or ethnic group in particular, and does not directly draw from the data of Indigenous communities. This data also does not assess confounding factors that could, in a real-world setting, influence Indigenous students’ sleep schedules, such as systemic barriers or cultural practices.

# Data Exploration and Research Questions

What to include in this section: Describe the provenance of your data. That is, where did you get the data, who collected the data, for what purpose, who/what make up the cases. Explain how your data meet the FAIR and/or CARE Principles. Describe what attributes you will focus your analysis on (mention if they are part of your data sets or if you created them out of your data sets)

maybe here we can put a portion of the table of the cleaned data? idk just an idea

## Research Question 1

## Research Question 2

After analyzing how sleep duration and physical activity vary by university years, we wanted to see how given two of the attributes for a particular student, how the third would be affected. More specifically, the question we are trying to answer is:

-   Given the class group of a student (underclassmen or upperclassmen) and their sleep duration, how do their reported levels of physical activity vary?

To best visualize this relationship, we thought that a line graph would work best, and in that way we would be able to see the trend between the two classes with duration of sleep spanning from 4 to 9 hours. The graph below demonstrates this relationship. Some things to keep in mind are that the x axis, sleep duration, is measured in hours, while the y axis, physical activity levels, are measured in minutes, and underclassmen are represented by the pink line and upperclassmen are represented by the blue line. The gray bubbles around the lines represent the confidence intervals, but for our analysis we just focused on the average lines themselves.

```{r echo=FALSE}
#| label: SleepActivityLineGraph
#| fig-cap: "How Physical Activity Levels vary with Sleep Duration and Class Group"
#| fig-pos: H
#| fig-height: 5
#| fig-width: 7
#| fig-alt: "Line graph showing varying physical activity levels over lengths of sleep duration"
#| aria-describedby: namesPlotLD
#| lst-label: lst-figure2
#| lst-cap: "Code Chunk for Making Figure 2"
#loading necessary packages
library(tidyr)
library(dplyr)
library(rvest)
library(googlesheets4)
library(ggplot2)
library(esquisse)
# loading data
sleepData <- read_sheet("https://docs.google.com/spreadsheets/d/1BszLI2k3ti0AzKrY6msUY5lqblDG-6gQRZBEJUIj5i8/edit?usp=sharing")

#cleaning the data and keeping only what is applicable
CleanedSleepData <- sleepData %>%
  select(4, 5, 9) %>%
  na.omit()

Q2SleepData <- CleanedSleepData %>% 
  mutate(
    University_Year = case_match(
      .x = University_Year,
      "1st Year" ~ "Underclassmen",
      "2nd Year" ~ "Underclassmen",
      "3rd Year" ~ "Upperclassmen",
      "4th Year" ~ "Upperclassmen",
      .default = "missing"
    )
  )
# Make Data Visualization ----
ggplot(
  data = Q2SleepData,
  mapping = aes(
    x = Sleep_Duration,
    y = Physical_Activity,
    colour = University_Year
   )
  ) +
  geom_smooth(se = TRUE) +
  scale_color_manual(
    values = c(Underclassmen = "#F725DF",
               Upperclassmen = "#3538DC")
  ) +
  labs(
    x = "Sleep Duration (hours)",
    y = "Physical Activity (mins)",
    title = "Sleep Duration x Physical Activity x Class",
    color = "Class"
  ) +
  theme_light()
```

From this graph, there were a few things we noticed and found interesting:

-   The first is how the trends for upperclassmen and underclassmen seem to be inverted. That is, how at a given hour for sleep duration, the physical activity of one group goes up while the other goes down, or vice versa.

-   Second, if we look at where the lines cross the 8 hour mark (we chose 8 because it is right in the middle of the recommended amount of sleep a person should get every night (7-9)[^2]) we can see a big gap between the recorded minutes of physical activity and underclassman might get (just above 55) versus an upperclassman (just above 65).

-   The third interesting takeaway from looking at this graph is how we could visually see at what point of sleep duration do upperclassmen and underclassmen hit their maximum physical activity levels. We see that for underclassmen it is at 4 hours whereas for upperclassmen it is at about 7.5/8 hours.

[^2]: Assess your sleep needs. Sleep Medicine. (n.d.). https://sleep.hms.harvard.edu/education-training/public-education/sleep-and-health-education-program/sleep-health-education-92#:\~:text=Although%20there%20is%20some%20genetic,sleep%20as%20long%20as%20possible.

After considering these takeaways, we made some inferences about what might have influenced these sleep patterns and activity levels between classes. The jump between physical activity levels at certain hours and the difference between where the groups reached their maximum levels of sleep duration could be attributed to a difference in time management skills. As students reach their 3rd and 4th years, they typically have figured out a schedule that allows them to balance getting good sleep while maintaining an active lifestyle. This trend could also be attributed to how upperclassmen might have learned the value of maintaining their physical health, while underclassmen might be spreading themselves thin since they have just entered a new environment.

## Research Question 3
We wanted to create a whollistic analysis regarding the correlation of physical activity and students' sleep duration, regardless of student year. To find this, we proposed the following research question:
-    Is there a significant interaction between physical activity and sleep duration?

To best analyze this, we created a dot plot to show the distribution of students' physical activity in minutes(the independent variable found on the 'x' axis) and students' sleep duration in hours (the dependent variable found on the 'y' axis). Each dot will also be one of four colors, each color representing a university year: red for first years, blue for second years, green for third years, and purple for fourth years. This information can also be found in the key of the data visualization below. 

```{r echo=FALSE}
#| label: PhysicalActivityvsSleepDuration
#| fig-cap: "The Correlation between Physical Activity and Sleep Duration Across All Student Years "
#| fig-pos: H
#| fig-height: 5
#| fig-width: 7
#| fig-alt: "Dot plot showing the correlation between physical activity and sleep duration across all student years"
#| aria-describedby: namesPlotLD
#| lst-label: lst-figure2
#| lst-cap: "Code Chunk for Making Figure 3"
#loading necessary packages
library(tidyr)
library(dplyr)
library(rvest)
library(googlesheets4)
library(ggplot2)
library(esquisse)
# loading data
sleepData <- read_sheet("https://docs.google.com/spreadsheets/d/1BszLI2k3ti0AzKrY6msUY5lqblDG-6gQRZBEJUIj5i8/edit?usp=sharing")

#selects just the columns applicable for our research questions
CleanedSleepData <- sleepData %>%
  select(4, 5, 9) %>%
  na.omit() #checks for and ignores any values that have NA

# Make Data Visualization ----
ggplot(CleanedSleepData) +
  aes(
    x = Physical_Activity,
    y = Sleep_Duration,
    colour = University_Year
  ) +
  geom_point() +
  scale_color_hue(direction = 1) +
  theme_minimal() + 
  labs(
    x = "Physical Activity (minutes)",
    y = "Sleep Duration (hours)",
    title = "Physical Activity vs. Sleep Duration")
```
From this visualization, we were able to gain a few key insights:

-    There seems to be no significant correlation between students' physical activity and sleep duration. This could be due to a number of confounding factors -such as class schedule, workload, major, personal events, lifestyle choices- that are not accounted for within the dataset, nor within the attributes that we are specifically analyzing.
-    In addition, this could also be due to the synthetic nature of the dataset we are analyzing, which, even if it draws from existing measured attributes of sleep duration and physcial activity, might not be a perfect represenation of these variables, and may thus skew our findings and their applicability to real-world scenarios.

## Research Question 4

# Conclusion

# References

# Code Appendix

```{r codeAppend, ref.label=knitr::all_labels(), echo=TRUE, eval=FALSE}
```
